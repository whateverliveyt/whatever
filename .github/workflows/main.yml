name: Video Rotation Stage 2

on:
  workflow_dispatch:

jobs:
  rotation-test:
    runs-on: ubuntu-latest

    steps:
      - name: Download video (listA & listB)
        run: |
          for i in {01..15}; do
            wget -q https://github.com/USERNAME/REPO/releases/download/v1.0/listA_$i.mp4
          done

          for i in {01..10}; do
            wget -q https://github.com/USERNAME/REPO/releases/download/v1.0/listB_$i.mp4
          done

      - name: Simulasi rotasi harian (1 keluar, 1 masuk)
        run: |
          echo "=== SEBELUM ROTASI ==="
          echo "ListA:"
          ls listA_*.mp4
          echo "ListB:"
          ls listB_*.mp4

          KELUAR=$(ls listA_*.mp4 | shuf -n 1)
          MASUK=$(ls listB_*.mp4 | shuf -n 1)

          echo ""
          echo "Video KELUAR dari listA: $KELUAR"
          echo "Video MASUK dari listB:  $MASUK"

          mv "$KELUAR" "tmp_$KELUAR"
          mv "$MASUK" "${KELUAR}"
          mv "tmp_$KELUAR" "${MASUK}"

          echo ""
          echo "=== SETELAH ROTASI (SIMULASI) ==="
          echo "ListA:"
          ls listA_*.mp4
          echo "ListB:"
          ls listB_*.mp4
